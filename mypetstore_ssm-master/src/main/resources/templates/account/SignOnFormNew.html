<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>登录</title>
    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/login.css">
    <link rel="stylesheet" href="../css/sign-up-login.css">
    <link rel="stylesheet" type="text/css" href="http://www.jq22.com/jquery/font-awesome.4.6.0.css">
    <link rel="stylesheet" href="../css/inputEffect.css"/>
    <link rel="stylesheet" href="../css/verifyCode.css"/>
    <link rel="stylesheet" href="../css/tooltips.css"/>
    <link rel="stylesheet" href="../css/spop.min.css"/>

    <script src="http://www.jq22.com/jquery/jquery-1.10.2.js"></script>
    <script src="../js/snow.js"></script>
    <script src="../js/jquery.pure.tooltips.js"></script>
    <script src="../js/verifyCode.js"></script>
    <script src="../js/spop.min.js"></script>
    <script>
        var wait = 20;

        //倒计时
        function timer() {
            if (wait == 0) {
                $("#sendBtn").val("Get CheckCode");
                $("#sendBtn").removeAttr("disabled");
                $("#sendBtn").css("border-color", "1e9fff").css("background", "#ffffff").css("cursor", "pointer");
                wait = 20;
            } else {
                $("#sendBtn").attr("disabled", "true");
                $("#sendBtn").css("border-color", "fbfbfb").css("background", "#ccc").css("cursor", "not-allowed");
                $("#sendBtn").val(wait + "秒后重发");
                wait--;
                setTimeout(function () {
                    timer()
                }, 1000);
            }
        }

        function sendCode() {
            var memPhone = $("#memPhone").val();
            console.log(memPhone.length);
            if (memPhone == '' || memPhone.length != 11) {
                alert("请输入正确的手机号！");
                return;
            } else {
                $.ajax({
                    type: 'GET',
                    url: '[[${basePath}]]/check/code',
                    data: {
                        memPhone: memPhone
                    },
                    dataType: 'json',
                    success: function (data) {
                        if (data) {
                            timer();
                        } else {
                            alert("获取验证码失败");
                        }
                    },
                    error: function (data) {
                        alert('连接超时！');
                    },
                });
            }
        }


    </script>
    <script>
        (function () {
            // trim polyfill : https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim
            if (!String.prototype.trim) {
                (function () {
                    // Make sure we trim BOM and NBSP
                    var rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;
                    String.prototype.trim = function () {
                        return this.replace(rtrim, '');
                    };
                })();
            }

            [].slice.call(document.querySelectorAll('input.input__field')).forEach(function (inputEl) {
                // in case the input is already filled..
                if (inputEl.value.trim() !== '') {
                    classie.add(inputEl.parentNode, 'input--filled');
                }

                // events:
                inputEl.addEventListener('focus', onInputFocus);
                inputEl.addEventListener('blur', onInputBlur);
            });

            function onInputFocus(ev) {
                classie.add(ev.target.parentNode, 'input--filled');
            }

            function onInputBlur(ev) {
                if (ev.target.value.trim() === '') {
                    classie.remove(ev.target.parentNode, 'input--filled');
                }
            }
        })();

        $(function () {
            $('#login #login-password').focus(function () {
                $('.login-owl').addClass('password');
            }).blur(function () {
                $('.login-owl').removeClass('password');
            });
            $('#login #register-password').focus(function () {
                $('.register-owl').addClass('password');
            }).blur(function () {
                $('.register-owl').removeClass('password');
            });
            $('#login #register-repassword').focus(function () {
                $('.register-owl').addClass('password');
            }).blur(function () {
                $('.register-owl').removeClass('password');
            });
            $('#login #forget-password').focus(function () {
                $('.forget-owl').addClass('password');
            }).blur(function () {
                $('.forget-owl').removeClass('password');
            });
        });

        function goto_register() {
            $("#register-username").val("");
            $("#register-password").val("");
            $("#register-repassword").val("");
            $("#register-code").val("");
            $("#tab-2").prop("checked", true);
        }

        function goto_login() {
            $("#login-username").val("");
            $("#login-password").val("");
            $("#tab-1").prop("checked", true);
        }
    </script>
    <style type="text/css">
        html {
            width: 100%;
            height: 100%;
        }

        body {

            background-repeat: no-repeat;

            background-position: center center #2D0F0F;

            background-color: #00BDDC;

            background-image: url(../images/snowblack.jpeg);

            background-size: 130% 130%;

        }

        .snow-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100001;
        }

    </style>
</head>
<body>
<!-- 雪花背景 -->
<div class="snow-container"></div>
<!-- 登录控件 -->
<div id="login">
    <input id="tab-1" type="radio" name="tab" class="sign-in hidden" checked/>
    <input id="tab-2" type="radio" name="tab" class="sign-up hidden"/>
    <input id="tab-3" type="radio" name="tab" class="sign-out hidden"/>
    <div class="wrapper">
        <!-- 登录页面 -->
        <div class="login sign-in-htm">
            <form class="container offset1 loginform" method="post" action="/account/login">
                <!-- 猫头鹰控件 -->
                <div id="owl-login" class="login-owl">
                    <div class="hand"></div>
                    <div class="hand hand-r"></div>
                    <div class="arms">
                        <div class="arm"></div>
                        <div class="arm arm-r"></div>
                    </div>
                </div>
                <div class="pad input-container">
                    <section class="content">
                        <span th:unless="${login_msg}==null" style="color: red" th:text="${login_msg}"></span>
							<span class="input input--hideo">
								<input class="input__field input__field--hideo" type="text" id="login-username"
                                       name="username"
                                       autocomplete="off" placeholder="Username--" tabindex="1" maxlength="15"/>
								<label class="input__label input__label--hideo" for="login-username">
									<i class="fa fa-fw fa-user icon icon--hideo"></i>
									<span class="input__label-content input__label-content--hideo"></span>
								</label>
							</span>
                        <span class="input input--hideo">
								<input class="input__field input__field--hideo" type="password" id="login-password"
                                       name="password" placeholder="Password--" tabindex="2" maxlength="15"/>
								<label class="input__label input__label--hideo" for="login-password">
									<i class="fa fa-fw fa-lock icon icon--hideo"></i>
									<span class="input__label-content input__label-content--hideo"></span>
								</label>

							</span>
                        <span class="input input--hideo input--verify_code">
								<input class="input__field input__field--hideo" type="text" id="login-verify-code" name="code"
                                       autocomplete="off" placeholder="请输入验证码" tabindex="3" maxlength="4"/>
								<label class="input__label input__label--hideo" for="login-verify-code">
									<i class="fa fa-fw fa-bell-o icon icon--hideo"></i>
									<span class="input__label-content input__label-content--hideo"></span>
								</label>
							</span>
                        <!--							<canvas class="verify-code-canvas" id="login-verify-code-canvas"></canvas>-->
                        <a style="margin-top: 22px" href="javascript:refreshCode()">
                            <img style="margin-top: 22px" src="http://localhost:8081/checkcodeservlet" title="看不清点击刷新" id="vcode"/>
                        </a>
                    </section>
                </div>
				<div ><span th:text="${message}"></span> </div>
                <!--										<a href="javascript:refreshCode()">-->
                <!--										<img  src="http://localhost:8081/checkcodeservlet" title="看不清点击刷新" id="vcode"/>-->
                <!--										</a>-->
                <div class="form-actions">
                    <a tabindex="5" class="btn btn-link text-muted" onclick="goto_register()">注册</a>
                    <input class="btn btn-primary" type="submit" name="signon" tabindex="3" value="登录"
                           style="color:white;"/>
                </div>
            </form>
        </div>
		<script type="text/javascript">
			// function refreshCode(){
			// 	var vcode = document.getElementById("vcode");
			// 	vcode.src = "${pageContext.request.contextPath}/checkcodeservlet?time="+new Date().getTime();
			// }
			function refreshCode() {
				fetch("http://localhost:8081/checkcodeservlet?time=" + new Date().getTime()).then(function (response) {
					return response.blob();
				}).then(function (blob) {
					var img = document.getElementById("vcode");
					img.src = URL.createObjectURL(blob);
				})
			}
		</script>
        <!-- 注册页面 -->
        <div class="login sign-up-htm">
            <form action="/account/register" method="post" class="container offset1 loginform">
                <!-- 猫头鹰控件 -->
                <div id="owl-login" class="register-owl">
                    <div class="hand"></div>
                    <div class="hand hand-r"></div>
                    <div class="arms">
                        <div class="arm"></div>
                        <div class="arm arm-r"></div>
                    </div>
                </div>
                <div class="pad input-container">
                    <section class="content">
							<span class="input input--hideo">
								<input class="input__field input__field--hideo" type="text" id="username" name="username"
                                       autocomplete="off" placeholder="username" maxlength="15"/>
								<label class="input__label input__label--hideo" for="username">
									<i class="fa fa-fw fa-user icon icon--hideo"></i>
									<span class="input__label-content input__label-content--hideo"></span>
								</label>
							</span>
                        <span class="input input--hideo">
								<input class="input__field input__field--hideo" type="password" id="register-password" name="password"
                                       placeholder="password" maxlength="15"/>
								<label class="input__label input__label--hideo" for="register-password">
									<i class="fa fa-fw fa-user icon icon--hideo"></i>
									<span class="input__label-content input__label-content--hideo"></span>
								</label>
							</span>
                        <span class="input input--hideo">
								<input class="input__field input__field--hideo" type="password" id="repeatedPassword" name="repeatedPassword"
                                       placeholder="confirm password " maxlength="15"/>
								<label class="input__label input__label--hideo" for="repeatedPassword">
									<i class="fa fa-fw fa-lock icon icon--hideo"></i>
									<span class="input__label-content input__label-content--hideo"></span>
								</label>
							</span>
                        <span class="input input--hideo">
								<input class="input__field input__field--hideo" type="text" id="firstName" name="firstName"
                                       autocomplete="off" placeholder="firstName"maxlength="15"/>
								<label class="input__label input__label--hideo" for="firstName">
									<i class="fa fa-fw fa-user icon icon--hideo"></i>
									<span class="input__label-content input__label-content--hideo"></span>
								</label>
							</span>
                        <span class="input input--hideo">
								<input class="input__field input__field--hideo" type="text" id="lastName" name="lastName"
                                       autocomplete="off" placeholder="LastName"maxlength="15"/>
								<label class="input__label input__label--hideo" for="lastName">
									<i class="fa fa-fw fa-user icon icon--hideo"></i>
									<span class="input__label-content input__label-content--hideo"></span>
								</label>
							</span>
                       <span class="input input--hideo">
								<input class="input__field input__field--hideo" type="text" id="email" name="email"
                                       autocomplete="off" placeholder="email"maxlength="15"/>
								<label class="input__label input__label--hideo" for="email">
									<i class="fa fa-fw fa-user icon icon--hideo"></i>
									<span class="input__label-content input__label-content--hideo"></span>
								</label>
							</span>

                        <span class="input input--hideo">
								<input class="input__field input__field--hideo" type="text" id="phone" name="phone"
                                       autocomplete="off" placeholder="phone"maxlength="15"/>
								<label class="input__label input__label--hideo" for="phone">
									<i class="fa fa-fw fa-user icon icon--hideo"></i>
									<span class="input__label-content input__label-content--hideo"></span>
								</label>
							</span>

                        <span class="input input--hideo">
								<input class="input__field input__field--hideo" type="text" id="address1" name="address1"
                                       autocomplete="off" placeholder="address1"maxlength="30"/>
								<label class="input__label input__label--hideo" for="address1">
									<i class="fa fa-fw fa-user icon icon--hideo"></i>
									<span class="input__label-content input__label-content--hideo"></span>
								</label>
							</span>
                        <span class="input input--hideo">
								<input class="input__field input__field--hideo" type="text" id="address2" name="address2"
                                       autocomplete="off" placeholder="address2"maxlength="30"/>
								<label class="input__label input__label--hideo" for="address2">
									<i class="fa fa-fw fa-user icon icon--hideo"></i>
									<span class="input__label-content input__label-content--hideo"></span>
								</label>
							</span>
                        <span class="input input--hideo">
								<input class="input__field input__field--hideo" type="text" id="city" name="city"
                                       autocomplete="off" placeholder="city"maxlength="15"/>
								<label class="input__label input__label--hideo" for="city">
									<i class="fa fa-fw fa-user icon icon--hideo"></i>
									<span class="input__label-content input__label-content--hideo"></span>
								</label>
							</span>
                        <span class="input input--hideo">
								<input class="input__field input__field--hideo" type="text" id="country" name="country"
                                       autocomplete="off" placeholder="country"maxlength="15"/>
								<label class="input__label input__label--hideo" for="country">
									<i class="fa fa-fw fa-user icon icon--hideo"></i>
									<span class="input__label-content input__label-content--hideo"></span>
								</label>
							</span>
                        <span class="input input--hideo">
								<input class="input__field input__field--hideo" type="text" id="zip" name="zip"
                                       autocomplete="off" placeholder="zip" maxlength="15"/>
								<label class="input__label input__label--hideo" for="zip">
									<i class="fa fa-fw fa-user icon icon--hideo"></i>
									<span class="input__label-content input__label-content--hideo"></span>
								</label>
							</span>

                        <span class="input input--hideo">
								<input class="input__field input__field--hideo" type="text" id="state" name="state"
                                       autocomplete="off" placeholder="state" maxlength="15"/>
								<label class="input__label input__label--hideo" for="state">
									<i class="fa fa-fw fa-user icon icon--hideo"></i>
									<span class="input__label-content input__label-content--hideo"></span>
								</label>
							</span>

<!--						<table>-->
<!--							<tr>-->
<!--								<td>CheckCode:</td>-->
<!--								<td><input type="text" name="verifycode"  id="verifycode" /></td>-->
<!--								<td>-->
<!--									<a href="javascript:refreshCode()">-->
<!--										<img src="http://localhost:8089/checkcodeservlet" title="看不清点击刷新" id="vcode"/>-->
<!--									</a>-->
<!--								</td>-->
<!--							</tr>-->
<!--						</table>-->

                    </section>
                </div>
                <div class="form-actions">
                    <a class="btn pull-left btn-link text-muted" onclick="goto_login()">返回登录</a>
					<input class="btn btn-primary" type="submit" name="newAccount"  value="注册" style="color:white;"/>
                </div>
            </form>
        </div>
    </div>
</div>
</body>
</html>